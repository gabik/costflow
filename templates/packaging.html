{% extends "base.html" %}
{% block title %}{{ _('Manage Packaging') }} - CostFlow{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
        <div>
            <h1 class="display-6 fw-bold text-primary">{{ _('Manage Packaging') }}</h1>
            <p class="text-secondary">ניהול סוגי אריזות ומחירים.</p>
        </div>
        <a href="{{ url_for('packaging.add_packaging') }}" class="btn btn-primary">
            <i class="bi bi-plus-lg me-2"></i> {{ _('Add Packaging') }}
        </a>
    </div>
</div>

<div class="card shadow-sm">
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
            <tr>
                <th>{{ _('Name') }}</th>
                <th>{{ _('Quantity per Package') }}</th>
                <th>{{ _('Price per Package') }}</th>
                <th>{{ _('Price per Unit') }}</th>
                <th class="text-end">{{ _('Actions') }}</th>
            </tr>
            </thead>
            <tbody>
            {% for packaging in packaging %}
            <tr>
                <td class="fw-medium">{{ packaging.name }}</td>
                <td>{{ "%.2f"|format(packaging.quantity_per_package) }}</td>
                <td>{{ currency_symbol }}{{ "%.2f"|format(packaging.price_per_package) }}</td>
                <td>{{ currency_symbol }}{{ (packaging.price_per_package / packaging.quantity_per_package) | round(2) }}</td>
                <td class="text-end">
                    <div class="btn-group">
                        <a href="{{ url_for('packaging.edit_packaging', packaging_id=packaging.id) }}" class="btn btn-sm btn-outline-secondary" title="{{ _('Edit') }}">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <form method="POST" action="{{ url_for('packaging.delete_packaging', packaging_id=packaging.id) }}" class="d-inline" onsubmit="return confirm('האם אתה בטוח שברצונך למחוק פריט זה?');">
                            <button type="submit" class="btn btn-sm btn-outline-danger" title="{{ _('Delete') }}">
                                <i class="bi bi-trash"></i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="text-center py-4 text-muted">לא נמצאו אריזות במערכת.</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
