<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <title>{{ _('Unit Fix Complete') }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            direction: rtl;
        }
        .success {
            color: green;
            font-weight: bold;
            font-size: 1.5em;
        }
        .summary {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .details {
            background: #f0f0f0;
            padding: 15px;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        .next-steps {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        a {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1 class="success">âœ… {{ _('Unit System Fix Completed Successfully!') }}</h1>

    <div class="summary">
        <h2>{{ _('Migration Summary') }}:</h2>
        <ul>
            <li>{{ _('Units updated to kg') }}: {{ fixes_log.units_updated }}</li>
            <li>{{ _('Components fixed (g to kg)') }}: {{ fixes_log.components_fixed }}</li>
            <li>{{ _('Batch sizes fixed') }}: {{ fixes_log.batch_sizes_fixed }}</li>
            <li>{{ _('Total changes') }}: {{ fixes_log.units_updated + fixes_log.components_fixed + fixes_log.batch_sizes_fixed }}</li>
        </ul>
    </div>

    {% if fixes_log.details %}
    <div class="details">
        <h3>{{ _('Detailed Changes') }}:</h3>
        <ul>
            {% for detail in fixes_log.details[:50] %}
            <li>{{ detail }}</li>
            {% endfor %}
            {% if fixes_log.details|length > 50 %}
            <li>... and {{ fixes_log.details|length - 50 }} more changes</li>
            {% endif %}
        </ul>
    </div>
    {% endif %}

    <div class="next-steps">
        <h3>{{ _('Next Steps') }}:</h3>
        <ol>
            <li>{{ _('Verify product costs are now correct') }}</li>
            <li>{{ _('Check that profit margins are reasonable (not -6000%)') }}</li>
            <li>{{ _('Test creating a new product/premake') }}</li>
            <li>{{ _('All new data will be saved in kg baseline') }}</li>
            <li>{{ _('Display will show g for values < 1kg automatically') }}</li>
        </ol>
    </div>

    <h3>{{ _('Quick Actions') }}:</h3>
    <a href="{{ url_for('admin.verify_units') }}">{{ _('Verify Units Again') }}</a>
    <a href="{{ url_for('products.products') }}">{{ _('View Products') }}</a>
    <a href="{{ url_for('premakes.premakes') }}">{{ _('View Premakes') }}</a>
    <a href="{{ url_for('admin.check_unit_fix') }}">{{ _('Validate Costs') }}</a>
    <a href="{{ url_for('main.index') }}">{{ _('Dashboard') }}</a>
</body>
</html>