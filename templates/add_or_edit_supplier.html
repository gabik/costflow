{% extends "base.html" %}
{% block title %}{{ _('Edit') if supplier else _('Add') }} {{ _('Supplier') }} - CostFlow{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('suppliers.suppliers') }}">{{ _('Suppliers') }}</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ _('Edit') if supplier else _('Add') }} {{ _('Supplier') }}</li>
            </ol>
        </nav>
        <h1 class="display-6 fw-bold text-primary">{{ _('Edit') if supplier else _('Add') }} {{ _('Supplier') }}</h1>
    </div>
</div>

{% if error %}
<div class="alert alert-danger alert-dismissible fade show" role="alert">
    {{ error }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}

<div class="row">
    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-body">
                <form method="POST" action="{{ url_for('suppliers.edit_supplier', supplier_id=supplier.id) if supplier else url_for('suppliers.add_supplier') }}">

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">{{ _('Supplier Name') }} <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name"
                                   value="{{ supplier.name if supplier else '' }}" required autofocus>
                            <div class="form-text">{{ _('Unique name to identify supplier in the system') }}</div>
                        </div>
                        <div class="col-md-6">
                            <label for="contact_person" class="form-label">{{ _('Contact Person') }}</label>
                            <input type="text" class="form-control" id="contact_person" name="contact_person"
                                   value="{{ supplier.contact_person if supplier else '' }}">
                            <div class="form-text">{{ _('Name of contact person at supplier') }}</div>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="phone" class="form-label">{{ _('Phone') }}</label>
                            <input type="tel" class="form-control" id="phone" name="phone"
                                   value="{{ supplier.phone if supplier else '' }}"
                                   placeholder="050-1234567">
                            <div class="form-text">{{ _('Phone number for contact') }}</div>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">{{ _('Email') }}</label>
                            <input type="email" class="form-control" id="email" name="email"
                                   value="{{ supplier.email if supplier else '' }}"
                                   placeholder="supplier@example.com">
                            <div class="form-text">{{ _('Email address for correspondence') }}</div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label">{{ _('Address') }}</label>
                        <textarea class="form-control" id="address" name="address" rows="3"
                                  placeholder="{{ _('Street, City, Postal Code') }}">{{ supplier.address if supplier else '' }}</textarea>
                        <div class="form-text">{{ _('Physical address of supplier') }}</div>
                    </div>

                    <hr>

                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('suppliers.suppliers') }}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-right me-2"></i> {{ _('Cancel') }}
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-lg me-2"></i> {{ _('Update') if supplier else _('Add') }} {{ _('Supplier') }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card bg-light border-0">
            <div class="card-body">
                <h6 class="card-title fw-bold">
                    <i class="bi bi-info-circle me-2"></i>{{ _('Supplier Information') }}
                </h6>
                <p class="card-text small">
                    {{ _('Suppliers in the system allow managing multiple sources for raw materials with different prices.') }}
                </p>
                <ul class="small">
                    <li>{{ _('Each supplier can provide multiple raw materials') }}</li>
                    <li>{{ _('Each raw material can be supplied by multiple suppliers') }}</li>
                    <li>{{ _('The system will automatically choose the cheapest supplier during production') }}</li>
                    <li>{{ _('Inventory is managed separately for each supplier') }}</li>
                </ul>
                {% if supplier %}
                <hr>
                <p class="small text-muted mb-0">
                    <i class="bi bi-clock me-1"></i>
                    {{ _('Created on:') }} {{ supplier.created_at.strftime('%d/%m/%Y') if supplier.created_at else _('Unknown') }}
                </p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}